# Deployment Commands

## Local: Commit and Push to Git

```bash
# Commit the changes
git commit -m "Add weighted training, evaluation scripts, and update dependencies"

# Push to main
git push origin main
```

## Server: Pull and Deploy

```bash
# SSH into your server, then:
cd /path/to/stone_classifier  # Your deployment directory

# Pull latest changes
git pull origin main

# Activate virtual environment (if using one)
source venv/bin/activate  # or your venv path

# Install/update dependencies
pip install -r requirements.txt

# Set up Stone_Data symlink (if not already done)
# Assuming your data is in ../stone-classifier-data/Stone_Data
ln -s ../stone-classifier-data/Stone_Data Stone_Data

# Verify the symlink works
ls -la Stone_Data
ls Stone_Data/train
ls Stone_Data/val

# Train the model (if needed)
python3 train_model_weighted.py

# Restart your service (depends on your setup)
# Examples:
# - If using systemd: sudo systemctl restart stone-classifier
# - If using PM2: pm2 restart stone-classifier
# - If using supervisor: supervisorctl restart stone-classifier
# - If running manually: kill old process and restart
```

## Notes

- The model file (`stone_classifier_model_weighted.h5`) will be generated by training
- `class_indices.json` will also be generated during training
- Make sure your deployment code references `stone_classifier_model_weighted.h5` (not the old filename)
